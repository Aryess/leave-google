{"version":3,"sources":["app/initialize.coffee","app/lib/app_helpers.coffee","app/lib/base_view.coffee","app/lib/view_collection.coffee","app/locales/en.coffee","app/router.coffee","app/views/leave_google_form.coffee","app/views/leave_google_log.coffee","app/views/templates/leave_google_form.jade","app/views/templates/leave_google_log.jade"],"names":[],"mappings":"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,CAAC,EAAX,CAAc,eAAd,EAA+B;aAAA;AAC3B,eAAO,CAAC,GAAR,CAAY,eAAZ;AAAA,QACA,KAAC,MAAK,CAAC,YAAP,GAAsB,IADtB;AAAA,QAEA,KAAC,OAAD,EAFA;eAGA,KAAC,MAAK,CAAC,YAAP,GAAsB,MAJK;MAAA;IAAA,QAA/B,EApCQ;EAAA,CAlBZ;;AAAA,+BA4DA,cAAa;WACT,GAAG,CAAC,MAAM,CAAC,QAAX,CAAoB,EAApB,EAAwB;AAAA,eAAS,KAAT;KAAxB,EADS;EAAA,CA5Db;;AAAA,+BA+DA,gBAAe;AACX,WAAO,IAAC,MAAR,CADW;EAAA,CA/Df;;4BAAA;;GAF8C,SAFlD;;;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9FA;AAAA","file":"public/javascripts/app.js","sourcesContent":["Router = require './router'\n\n# The function called from index.html\n# Starts the application\n$ ->\n\n    window.app = {}\n    # Localization management\n    locale = window.locale\n    polyglot = new Polyglot()\n    try\n        locales = require \"locales/#{locale}\"\n    catch e\n        locale = 'en'\n        locales = require 'locales/en'\n\n    polyglot.extend locales\n    window.t = polyglot.t.bind polyglot\n\n    # Initialize routing\n    window.app.router = new Router()\n    Backbone.history.start()\n\n\n    url = window.location.origin\n    pathToSocketIO = \"/#{window.location.pathname.substring(1)}socket.io\"\n\n    window.sio = io url,\n        path: pathToSocketIO\n        reconnectionDelayMax: 60000\n        reconectionDelay: 2000\n        reconnectionAttempts: 3\n","(() ->\n    # IIFE to avoid collisions with other variables\n    (->\n        # Make it safe to do console.log() always.\n        console = window.console = window.console or {}\n        method = undefined\n        dummy = ->\n        methods = ('assert,count,debug,dir,dirxml,error,exception,\n                   group,groupCollapsed,groupEnd,info,log,markTimeline,\n                   profile,profileEnd,time,timeEnd,trace,warn').split ','\n\n        console[method] = console[method] or dummy while method = methods.pop()\n    )()\n)()\n","module.exports = class BaseView extends Backbone.View\n\n    template: ->\n\n    initialize: ->\n\n    getRenderData: ->\n        model: @model?.toJSON()\n\n    render: ->\n        @beforeRender()\n        @$el.html @template(@getRenderData())\n        @afterRender()\n        @\n\n    beforeRender: ->\n\n    afterRender: ->\n\n    destroy: ->\n        @undelegateEvents()\n        @$el.removeData().unbind()\n        @remove()\n        Backbone.View::remove.call @\n","BaseView = require 'lib/base_view'\n\n# View that display a collection of subitems\n# used to DRY views\n# Usage : new ViewCollection(collection:collection)\n# Automatically populate itself by creating a itemView for each item\n# in its collection\n\n# can use a template that will be displayed alongside the itemViews\n\n# itemView       : the Backbone.View to be used for items\n# itemViewOptions : the options that will be passed to itemViews\n# collectionEl : the DOM element's selector where the itemViews will\n#                be displayed. Automatically falls back to el if null\n\nmodule.exports = class ViewCollection extends BaseView\n\n    itemview: null\n\n    views: {}\n\n    template: -> ''\n\n    itemViewOptions: ->\n\n    collectionEl: null\n\n    # add 'empty' class to view when there is no subview\n    onChange: ->\n        @$el.toggleClass 'empty', _.size(@views) is 0\n\n    # can be overriden if we want to place the subviews somewhere else\n    appendView: (view) ->\n        @$collectionEl.append view.el\n\n    # bind listeners to the collection\n    initialize: ->\n        super\n        @views = {}\n        @listenTo @collection, \"reset\",   @onReset\n        @listenTo @collection, \"add\",     @addItem\n        @listenTo @collection, \"remove\",  @removeItem\n\n        if not @collectionEl?\n            collectionEl = el\n\n    # if we have views before a render call, we detach them\n    render: ->\n        view.$el.detach() for id, view of @views\n        super\n\n    # after render, we reattach the views\n    afterRender: ->\n        @$collectionEl = $(@collectionEl)\n        @appendView view.$el for id, view of @views\n        @onReset @collection\n        @onChange @views\n\n    # destroy all sub views before remove\n    remove: ->\n        @onReset []\n        super\n\n    # event listener for reset\n    onReset: (newcollection) ->\n        view.remove() for id, view of @views\n        newcollection.forEach @addItem\n\n    # event listeners for add\n    addItem: (model) =>\n        options = _.extend {}, {model: model}, @itemViewOptions(model)\n        view = new @itemview(options)\n        @views[model.cid] = view.render()\n        @appendView view\n        @onChange @views\n\n    # event listeners for remove\n    removeItem: (model) =>\n        @views[model.cid].remove()\n        delete @views[model.cid]\n\n        @onChange @views","module.exports =\n   # Leave Google\n    \"leave google title\": \"Leave Google\"\n    \"leave google step1 title\": \"First, connect to your Google account.\"\n    \"leave google email label\": \"Your Google email\"\n    \"leave google email placeholder\": \"you@gmail.com\"\n    \"leave google connect label\": \"Connect with Google\"\n    \"leave google step2 title\": \"Then, copy and paste the code from the popup in this field:\"\n    \"leave google choice title\": \"What data do you want tot import?\"\n    \"leave google choice photo\": \"Photos\"\n    \"leave google choice calendar\": \"Calendars\"\n    \"leave google choice contact\": \"Contacts\"\n    \"invalid token\": \"The token is invalid, please restart the process from the beginning.\"\n\n","FormView = require 'views/leave_google_form'\nLogView = require 'views/leave_google_log'\n\n\nmainView = null\n\nmodule.exports = class Router extends Backbone.Router\n\n    routes:\n        '': 'main'\n        'status': 'status'\n\n    main: ->\n        mainView?.remove()\n        mainView = new FormView()\n        mainView.render()\n        $('body').empty().append mainView.$el\n\n    status: ->\n        mainView?.remove()\n        mainView = new LogView()\n        mainView.render()\n        $('body').empty().append mainView.$el\n\n\n\n","BaseView = require '../lib/base_view'\n\nmodule.exports = class LeaveGoogleView extends BaseView\n\n    template: require './templates/leave_google_form'\n    tagName: 'section'\n    id: 'leave-google'\n\n    events:\n        'click  a#connect-google': 'connectWithGoogle'\n        'keypress #auth_code': 'onAuthCodeKeypress'\n        'click #step-pastecode-ok': 'onStep2Done'\n        'click #step-pastecode-ko': 'onStep2Cancel'\n        'click #lg-login': 'submitLg'\n\n    changeStep: (step) ->\n        @$('.step').hide()\n        @$(\"#step-#{step}\").show()\n        @$('#auth_code').focus() if step is 'pastecode'\n\n    afterRender: ->\n        @changeStep 'bigbutton'\n\n    connectWithGoogle: (event)->\n        event.preventDefault()\n        opts = [\n            'toolbars=0'\n            'width=700'\n            'height=600'\n            'left=200'\n            'top=200'\n            'scrollbars=1'\n            'resizable=1'\n        ].join(',')\n        @popup = window.open window.oauthUrl, 'Google OAuth',opts\n        @changeStep 'pastecode'\n\n    onStep2Done: (event)->\n        event.preventDefault()\n        @popup?.close()\n        @changeStep 'pickscope'\n\n    onStep2Cancel: (event)->\n        event.preventDefault()\n        @popup?.close()\n        @changeStep 'bigbutton'\n\n    onAuthCodeKeyup: (event) ->\n        @onStep2Done(event) if event.keyCode is 13 #ENTER\n        @onStep2Done(event) if event.keyCode is 27 #ESCAPE\n\n\n    submitLg: (event)->\n        event.preventDefault()\n        auth_code = @$(\"input:text[name=auth_code]\").val()\n        @$(\"input:text[name=auth_code]\").val(\"\")\n\n        scope =\n            photos: @$(\"input:checkbox[name=photos]\").prop(\"checked\")\n            calendars: @$(\"input:checkbox[name=calendars]\").prop(\"checked\")\n            contacts: @$(\"input:checkbox[name=contacts]\").prop(\"checked\")\n\n        $.post \"lg\", {auth_code: auth_code, scope: scope}\n        window.app.router.navigate 'status', true\n","BaseView = require '../lib/base_view'\n\nmodule.exports = class LeaveGoogleLogView extends BaseView\n\n    template: require './templates/leave_google_log'\n    tagName: 'section'\n    id: 'leave-google'\n\n    model:\n        photos:\n            processing: true\n            numberPhotos: 0\n            numberAlbum: 0\n            error: []\n        contacts:\n            processing: true\n            number:0\n        events:\n            processing: true\n            number:0\n            total: 0\n\n    initialize: ->\n        window.sio.on \"photos.album\", (data) =>\n            console.log \"photos.album\", data.number\n            @model.photos.numberAlbum = data.number\n            @render()\n        window.sio.on \"photos.err\", (data) =>\n            console.log \"photos.err\", data.number\n            console.log data\n            @model.photos.error.push data.url\n            @render()\n        window.sio.on \"photos.photo\", (data) =>\n            console.log \"photos.photo\", data.number\n            @model.photos.numberPhotos = data.number\n            @render()\n        window.sio.on \"calendars\", (data)=>\n            console.log \"calendars\", data.number\n            @model.events.number = data.number\n            @model.events.total = data.total\n            @render()\n        window.sio.on \"contacts\", (data) =>\n            console.log \"contacts\", data.number\n            @model.contacts.number = data.number\n            @render()\n        window.sio.on \"events.end\", =>\n            console.log \"calendars done\"\n            @model.events.processing = false\n            @render()\n        window.sio.on \"contacts.end\", =>\n            console.log \"contacts done\"\n            @model.contacts.processing = false\n            @render()\n        window.sio.on \"photos.end\", =>\n            console.log \"photos done\"\n            @model.photos.processing = false\n            @render()\n\n        window.sio.on 'invalid token', =>\n            console.log \"invalid token\"\n            @model.invalidToken = true\n            @render()\n            @model.invalidToken = false\n\n    afterRender: ->\n        app.router.navigate '', trigger: false\n\n    getRenderData: ->\n        return @model\n\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<h1>\" + (jade.escape(null == (jade_interp = t('leave google title')) ? \"\" : jade_interp)) + \"</h1><div class=\\\"content\\\"><section id=\\\"step-bigbutton\\\" class=\\\"step\\\"><h5>\" + (jade.escape(null == (jade_interp = t(\"leave google step1 title\")) ? \"\" : jade_interp)) + \"</h5><a id=\\\"connect-google\\\"\" + (jade.attr(\"title\", t(\"leave google connect label\"), true, false)) + \" class=\\\"btn\\\">\" + (jade.escape(null == (jade_interp = t(\"leave google connect label\")) ? \"\" : jade_interp)) + \"</a></section><section id=\\\"step-pastecode\\\" class=\\\"step\\\"><h5>\" + (jade.escape(null == (jade_interp = t(\"leave google step2 title\")) ? \"\" : jade_interp)) + \"</h5><form><input id=\\\"auth_code\\\" type=\\\"text\\\" name=\\\"auth_code\\\" placeholder=\\\"google auth_code\\\" required=\\\"required\\\"/><a id=\\\"step-pastecode-ok\\\" class=\\\"btn\\\">\" + (jade.escape(null == (jade_interp = t('confirm')) ? \"\" : jade_interp)) + \"</a><a id=\\\"step-pastecode-ko\\\" class=\\\"btn\\\">\" + (jade.escape(null == (jade_interp = t('cancel')) ? \"\" : jade_interp)) + \"</a></form></section><section id=\\\"step-pickscope\\\" class=\\\"step\\\"><h5>\" + (jade.escape(null == (jade_interp = t('leave google choice title')) ? \"\" : jade_interp)) + \"</h5><label>\" + (jade.escape(null == (jade_interp = t(\"leave google choice photo\")) ? \"\" : jade_interp)) + \"<input type=\\\"checkbox\\\" name=\\\"photos\\\" value=\\\"photos\\\" checked=\\\"checked\\\"/></label><label>\" + (jade.escape(null == (jade_interp = t(\"leave google choice calendar\")) ? \"\" : jade_interp)) + \"<input type=\\\"checkbox\\\" name=\\\"calendars\\\" value=\\\"calendars\\\" checked=\\\"checked\\\"/></label><label>\" + (jade.escape(null == (jade_interp = t(\"leave google choice contact\")) ? \"\" : jade_interp)) + \"<input type=\\\"checkbox\\\" name=\\\"contacts\\\" value=\\\"contacts\\\" checked=\\\"checked\\\"/></label><a id=\\\"lg-login\\\" class=\\\"btn\\\">\" + (jade.escape(null == (jade_interp = t('leave google')) ? \"\" : jade_interp)) + \"</a></section></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),photos = locals_.photos,contacts = locals_.contacts,events = locals_.events,invalidToken = locals_.invalidToken;\nif ( photos.processing || contacts.processing || events.processing)\n{\nbuf.push(\"<h1 class=\\\"pa2 matop0 biggest darkbg center\\\">Importation en cours ...</h1>\");\n}\nelse\n{\nbuf.push(\"<h1 class=\\\"pa2 matop0 biggest darkbg center\\\">Importation terminée</h1>\");\n}\nbuf.push(\"<div class=\\\"content\\\"><p>Connexion à l'API de Google.</p>\");\nif ( photos.numberPhotos)\n{\nbuf.push(\"<div>\");\nif ( photos.processing)\n{\nbuf.push(\"<p>Importation des photos en cours</p>\");\n}\nelse\n{\nbuf.push(\"<p>Importation des photos terminée</p>\");\n}\nbuf.push(\"<p>\" + (jade.escape(null == (jade_interp = photos.numberPhotos + \" photos importées dans \" + photos.numberAlbum + \" album(s)\") ? \"\" : jade_interp)) + \"</p>\");\n// iterate photos.error\n;(function(){\n  var $$obj = photos.error;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var url = $$obj[$index];\n\nbuf.push(\"<p>\" + (jade.escape(null == (jade_interp = \"Importation impossible : \" + url) ? \"\" : jade_interp)) + \"</p>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var url = $$obj[$index];\n\nbuf.push(\"<p>\" + (jade.escape(null == (jade_interp = \"Importation impossible : \" + url) ? \"\" : jade_interp)) + \"</p>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</div>\");\n}\nif ( events.number)\n{\nbuf.push(\"<div>\");\nif ( events.processing)\n{\nbuf.push(\"<p>Importation des calendriers en cours</p>\");\n}\nelse\n{\nbuf.push(\"<p>Importation des calendriers terminée</p>\");\n}\nbuf.push(\"<p>\" + (jade.escape(null == (jade_interp = events.number + \" evenements importés sur \" + events.total) ? \"\" : jade_interp)) + \"</p></div>\");\n}\nif ( contacts.number)\n{\nbuf.push(\"<div>\");\nif ( contacts.processing)\n{\nbuf.push(\"<p>Importation des contacts en cours</p>\");\n}\nelse\n{\nbuf.push(\"<p>Importation des contacts terminée</p>\");\n}\nbuf.push(\"<p>\" + (jade.escape(null == (jade_interp = contacts.number + \" contacts importés\") ? \"\" : jade_interp)) + \"</p></div>\");\n}\nif ( invalidToken)\n{\nbuf.push(\"<div class=\\\"error\\\">\" + (jade.escape(null == (jade_interp = t('leave google invalid token')) ? \"\" : jade_interp)) + \"</div>\");\n}\nif (!( photos.processing || contacts.processing || events.processing))\n{\nbuf.push(\"<a href=\\\"/\\\" target=\\\"_top\\\" class=\\\"btn\\\">\" + (jade.escape(null == (jade_interp = t('back to home')) ? \"\" : jade_interp)) + \"</a>\");\n}\nbuf.push(\"</div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}"]}